function getCategories(a,b){b.getAll().then(function(b){a.categories=b})}controller.controller("AppCtrl",["$scope","$rootScope",function(a,b){a.droit=b.droit}]).controller("LoginCtrl",["$scope","LoginFactory","$state",function(a,b,c){a.login=function(d){b.auth(d).then(function(a){c.go("admin")},function(b){a.message=b})}}]).controller("HeaderCtrl",["$scope","$state",function(a,b){a.menu=b.current.menu}]).controller("CatalogueCtrl",["$scope","CategorieFactory",function(a,b){getCategories(a,b)}]).controller("FooterCtrl",["$scope",function(a){a.currentDate=new Date}]).controller("HomeCtrl",["$scope","CategorieFactory",function(a,b){$(function(){sliders()}),getCategories(a,b)}]).controller("CategoryCtrl",["$scope","$stateParams","CategorieFactory","ProduitFactory",function(a,b,c,d){a.category=b.category,c.getAll().then(function(b){a.categories=b}),c.get(a.category).then(function(b){a.categorie=b}),d.getAll().then(function(c){a.produits=[],angular.forEach(c,function(c,d){c.categorie.nom==b.category&&a.produits.push(c)})})}]).controller("ProductCtrl",["$scope","$stateParams","ProduitFactory",function(a,b,c){a.product=b.product,c.get("nom",a.product).then(function(b){a.p=b})}]).controller("AdminCtrl",["$scope","CategorieFactory",function(a,b){getCategories(a,b),a.supprimer=function(c){b.delete(c).then(function(b){a.message="Catégorie supprimée avec succes"})}}]).controller("ListeProduitCtrl",["$scope","ProduitFactory","$stateParams",function(a,b,c){b.getAll().then(function(b){a.produits=[],angular.forEach(b,function(b,d){b.categorie.nom==c.nom&&a.produits.push(b)})}),a.categorie=c.nom,a.supprimerProduit=function(c){b.delete(c).then(function(b){a.message="Produit supprimé avec succes",a.produits.splice(a.produits.indexOf(c),1)})}}]).controller("FormCategorieCtrl",["$scope","$stateParams","CategorieFactory",function(a,b,c){a.message_if=!1,a.image_if=!1,a.$watch("file",function(){a.upload(a.file)}),a.new_categorie={},""!=b.id&&""!=b.nom&&c.get(b.nom).then(function(b){a.categorie=b}),a.upload=function(b){if(b&&!b.$error){a.new_categorie.image=b,a.image_if=!0;var c=new FileReader;c.onload=function(b){a.dataimg=b.target.result},c.readAsDataURL(b)}console.log("upload",a.new_categorie)},a.img_key="img/cle.png",a.hoverIn=function(){a.textimage="Deposez l'image ici"},a.textimage="Cliquez ou faites glisser l'image ici",a.hoverOut=function(){a.textimage="Cliquez ou faites glisser l'image ici"},a.saveCategory=function(d){d.image=a.new_categorie.image,""!=b.id&&(d.id=b.id),c.add(d).then(function(b){a.message="Nouvelle catégorie créée",""!=d.id&&void 0!=d.id&&null!=d.id&&(a.message="Catégorie mise à jour"),a.message_if=!0,a.categorie={}},function(a){console.log(a)})}}]).controller("FormProduitCtrl",["$scope","$stateParams","ProduitFactory","CategorieFactory","$state",function(a,b,c,d,e){a.message_if=!1,null!=b.nom&&d.get(b.nom).then(function(b){a.categorie=b,a.produit={},a.produit.categorie=b.nom}),a.image_if=!1,a.$watch("files",function(){a.upload(a.files)}),a.new_produit={images:[]},""!=b.id&&c.get("id",parseInt(b.id)).then(function(b){b.etat=parseInt(b.etat),a.produit=b}),a.upload=function(b){if(b&&b.length)for(var c=0;c<b.length;c++){var d=b[c];d.$error||(a.new_produit.images.push(d),a.image_if=!0)}},a.img_key="img/cle.png",a.hoverIn=function(){a.textimage="Deposez l'image ici"},a.textimage="Cliquez ou faites glisser l'image ici",a.hoverOut=function(){a.textimage="Cliquez ou faites glisser l'image ici"},a.saveProduct=function(d){d.image=a.new_produit.images,""!=b.id&&(d.id=b.id),d.categorie_id=a.categorie.id,c.add(d).then(function(b){a.message="Nouveau produit créé",""!=d.id&&void 0!=d.id&&null!=d.id&&(a.message="Produit mis à jour"),a.message_if=!0,a.produit={}},function(a){console.log(a)})}}]);